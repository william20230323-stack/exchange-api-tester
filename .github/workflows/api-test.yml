name: äº¤æ˜“æ‰€APIæ¸¬è©¦

on:
  push:
    branches: [main]
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - name: æª¢å‡ºä»£ç¢¼
      uses: actions/checkout@v4
    
    - name: è¨­ç½®Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: å®‰è£ä¾è³´
      run: pip install aiohttp
    
    - name: é‹è¡Œæ¸¬è©¦
      run: |
        echo "ğŸ¯ é–‹å§‹äº¤æ˜“æ‰€APIæ¸¬è©¦..."
        echo "==============================="
        
        # å‰µå»ºç°¡å–®æ¸¬è©¦è…³æœ¬
        cat > test.py << 'EOF'
import asyncio
import aiohttp
import time

async def main():
    print("æ¸¬è©¦é–‹å§‹...")
    exchanges = [
        ("Binance", "https://api.binance.com/api/v3/ping"),
        ("KuCoin", "https://api.kucoin.com/api/v1/ping"),
    ]
    
    async with aiohttp.ClientSession() as session:
        for name, url in exchanges:
            start = time.time()
            try:
                async with session.get(url, timeout=5) as resp:
                    elapsed = time.time() - start
                    print(f"âœ… {name}: {elapsed*1000:.0f}ms")
            except Exception as e:
                print(f"âŒ {name}: éŒ¯èª¤")

asyncio.run(main())
EOF
        
        python test.py
        echo "æ¸¬è©¦å®Œæˆï¼"

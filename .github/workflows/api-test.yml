name: Exchange API Test
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - run: |
          pip3 install requests
          
          # 一行一行寫入文件
          echo "import requests" > test.py
          echo "import time" >> test.py
          echo "exchanges = [" >> test.py
          echo "    ('Binance', 'https://api.binance.com/api/v3/ping')," >> test.py
          echo "    ('Coinbase', 'https://api.coinbase.com/v2/time')," >> test.py
          echo "]" >> test.py
          echo "for name, url in exchanges:" >> test.py
          echo "    try:" >> test.py
          echo "        r = requests.get(url, timeout=5)" >> test.py
          echo "        print(name, 'Status:', r.status_code)" >> test.py
          echo "    except:" >> test.py
          echo "        print(name, 'Failed')" >> test.py
          
          python3 test.py
